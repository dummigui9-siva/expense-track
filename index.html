<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Expense Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ================= THEME ================= */
:root{
  --bg1:#dff9f3; /* background gradient start */
  --bg2:#e6fff9; /* background gradient end */
  --card:#a0e7e5; /* card background */
  --text:#1a1a1a;
  --nav:#a0e7e5; /* same as card */
  --icon:#006666; /* contrasting icon color for menu */
  --icon-active:#004d4d;
  --header:#c2f0ed;
  --shadow-soft:0 12px 28px rgba(0,0,0,.14);
  --shadow-emboss:inset 4px 4px 8px rgba(0,0,0,.08),
                   inset -4px -4px 8px rgba(255,255,255,.9);
  --btn-edit:#28a745;
  --btn-delete:#dc3545;
}

body.dark{
  --bg1:#121214; 
  --bg2:#1c1c1e; 
  --card:#2c2c2e; 
  --text:#f5f5f5; 
  --nav:#2c2c2e; /* same as card for fluid look */
  --icon:#00ffff; /* bright cyan for contrast with nav */
  --icon-active:#00ffff; 
  --header:#3a3a3c; 
  --shadow-soft:0 20px 48px rgba(0,0,0,.85);
  --shadow-emboss:inset 4px 4px 10px rgba(0,0,0,.8),
                   inset -4px -4px 10px rgba(255,255,255,.1);
  --btn-edit:#28a745;
  --btn-delete:#dc3545;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--text);
  transition:.35s;
}

.app{
  max-width:420px;
  margin:auto;
  min-height:100vh;
  padding-bottom:160px;
}

.screen{display:none;padding:18px}
.screen.active{display:block}

/* ================= CARD ================= */
.card{
  background:var(--card);
  border-radius:28px;
  padding:22px;
  margin-bottom:18px;
  box-shadow:var(--shadow-soft);
}

/* ================= HOME ================= */
.home-title{text-align:center;font-size:28px;font-weight:800}
.home-quote{text-align:center;margin-top:6px;opacity:.85}

.home-icons{
  margin-top:20px;
  font-size:14px;
  line-height:1.8;
}
.home-icons div{
  display:flex;
  align-items:center;
  gap:12px;
}
.home-icons svg{
  width:18px;
  height:18px;
  stroke:var(--icon);
}

/* Home-only disclaimer */
.home-disclaimer{
  margin-top:22px;
  font-size:10px;
  opacity:.25;
  text-align:center;
}

/* ================= FORM ================= */
label{font-size:13px;font-weight:600;margin-top:14px;display:block}
input,select{
  width:100%;
  padding:14px;
  border:none;
  border-radius:18px;
  background:var(--header);
  margin-top:6px;
  color:var(--text);
}

/* ================= BUTTON ================= */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:999px;
  margin-top:18px;
  background:var(--card);
  font-weight:600;
  box-shadow:var(--shadow-emboss);
  transition:.25s;
  color:var(--text);
}
body.dark button{color:#f5f5f5}
button:hover{transform:translateY(-2px)}

/* ================= TABLE ================= */
.total-caption{text-align:center;font-size:14px;opacity:.7}
.total-box{text-align:center;font-size:22px;font-weight:700;margin-bottom:14px}

table{
  width:100%;
  border-spacing:0 12px;
  border-collapse:separate;
}
thead th{
  background:rgba(255,255,255,.08);
  padding:12px;
  border-radius:14px;
}
tbody tr{
  background:var(--card);
  border-radius:18px;
  box-shadow:var(--shadow-soft);
}
tbody td{text-align:center;padding:12px}

/* ================= FILTER DROPDOWN ================= */
#categoryFilter{
  border-radius:999px;
  padding:12px 16px;
  background:var(--header);
  color:var(--text);
  border:none;
  margin-bottom:16px;
  cursor:pointer;
}
#categoryFilter option{
  border-radius:4px;
  background:#fff;
  color:#000;
  padding:6px;
}

/* ================= ACTION BUTTONS ================= */
.action-btn{
  padding:6px 16px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  border:none;
  box-shadow:var(--shadow-emboss);
  color:#fff;
}
.edit-btn{background:var(--btn-edit)}
.delete-btn{background:var(--btn-delete)}
body.dark .edit-btn, body.dark .delete-btn{color:#ffffff;font-weight:700;}

/* ================= USER DASHBOARD ================= */
.dashboard{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
}
.stat{
  padding:16px;
  border-radius:999px;
  background:var(--card);
  text-align:center;
  font-weight:600;
  cursor:pointer;
  box-shadow:var(--shadow-emboss);
}
.stat:hover{transform:translateY(-2px)}

.user-output{
  margin-top:16px;
  padding:14px;
  border-radius:18px;
  background:rgba(255,255,255,.05);
  font-size:14px;
  color:var(--text);
}

/* ================= NAV BAR ================= */
.bottom-nav{
  position:fixed;
  bottom:18px;
  left:50%;
  transform:translateX(-50%);
  width:92%;
  max-width:380px;
  height:74px;
  background:var(--nav);
  border-radius:999px;
  display:flex;
  justify-content:space-around;
  align-items:center;
  box-shadow:0 26px 56px rgba(0,0,0,.45);
}

.nav-item{
  width:48px;
  height:48px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  transition:transform .5s cubic-bezier(.22,.61,.36,1);
}

.nav-item svg{
  width:18px;
  height:18px;
  stroke:var(--icon);
  transition:.35s;
}

.nav-item::before{
  content:"";
  position:absolute;
  width:52px;
  height:52px;
  border-radius:50%;
  background:var(--card); /* contrast circle for nav */
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0);
  transition:transform .5s cubic-bezier(.22,.61,.36,1),
             box-shadow .4s;
  z-index:-1;
}

.nav-item.active{transform:translateY(-22px)}
.nav-item.active::before{
  transform:translate(-50%,-50%) scale(1);
  box-shadow:0 14px 28px rgba(0,0,0,.45);
}
.nav-item.active svg{
  stroke:var(--icon-active);
  transform:scale(1.15);
}
</style>
</head>

<body>
<div class="app">

<!-- HOME -->
<div id="home" class="screen active">
  <div class="card">
    <div class="home-title">Expense Tracker</div>
    <div class="home-quote">ðŸ˜ŠðŸ’° Track expenses â€¢ Control spending â€¢ Live happily</div>

    <div class="home-icons">
      <div>
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
          <path d="M3 11l9-8 9 8"/><path d="M5 10v10h14V10"/>
        </svg>
        Home â€” Overview and guidance
      </div>
      <div>
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        Add â€” Log your daily expenses
      </div>
      <div>
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
          <path d="M4 4h16v16H4z"/><path d="M4 10h16"/><path d="M10 4v16"/>
        </svg>
        Expenses â€” Review, edit and analyze
      </div>
      <div>
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
          <circle cx="12" cy="8" r="4"/>
          <path d="M4 20c2-4 14-4 16 0"/>
        </svg>
        User â€” Profile, dashboard & settings
      </div>
    </div>

    <div class="home-disclaimer">
      Â© 2025â€“2026 Sivakumar Â· siva80mail@gmail.com Â· All rights reserved Â· Disclaimer applies
    </div>
  </div>
</div>

<!-- ADD -->
<div id="add" class="screen">
  <div class="card">
    <label>User Name</label>
    <input id="username">

    <label>Currency</label>
    <select id="currency" onchange="saveCurrency()">
      <option value="â‚¹">INR</option>
      <option value="$">USD</option>
      <option value="â‚¬">EUR</option>
    </select>

    <label>Amount</label>
    <input type="number" id="amount">

    <label>Category</label>
    <select id="category">
      <option value="">Select</option>
      <option>Food</option>
      <option>Travel</option>
      <option>Shopping</option>
      <option>Other</option>
    </select>

    <label>Date</label>
    <input type="date" id="date">

    <button id="addBtn" onclick="addExpense()">Add Expense</button>
  </div>
</div>

<!-- EXPENSES -->
<div id="list" class="screen">
  <div class="card">
    <select id="categoryFilter" onchange="applyFilters()">
      <option value="All">All</option>
      <option>Food</option>
      <option>Travel</option>
      <option>Shopping</option>
      <option>Other</option>
    </select>

    <div class="total-caption">Total Expenses</div>
    <div class="total-box" id="total">â‚¹0</div>

    <table>
      <thead>
        <tr><th>Date</th><th>Category</th><th>Amount</th><th>Action</th></tr>
      </thead>
      <tbody id="summaryBody"></tbody>
    </table>
  </div>
</div>

<!-- USER -->
<div id="settings" class="screen">
  <div class="card">
    <h3 id="profileName">User</h3>

    <div class="dashboard">
      <div class="stat" onclick="renderInsight()">Insights</div>
      <div class="stat" onclick="renderBudget()">Budget</div>
      <div class="stat" onclick="renderCategories()">Categories</div>
      <div class="stat" onclick="renderPreference()">Preferences</div>
    </div>

    <div class="user-output" id="userOutput">
      Click any tile above to view details.
    </div>

    <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
    <button onclick="exportCSV()">Export CSV</button>
  </div>
</div>

</div>

<!-- NAV -->
<div class="bottom-nav">
  <div class="nav-item active" onclick="switchScreen('home',this)">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
      <path d="M3 11l9-8 9 8"/><path d="M5 10v10h14V10"/>
    </svg>
  </div>
  <div class="nav-item" onclick="switchScreen('add',this)">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
      <path d="M12 5v14M5 12h14"/>
    </svg>
  </div>
  <div class="nav-item" onclick="switchScreen('list',this)">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
      <path d="M4 4h16v16H4z"/><path d="M4 10h16"/><path d="M10 4v16"/>
    </svg>
  </div>
  <div class="nav-item" onclick="switchScreen('settings',this)">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
      <circle cx="12" cy="8" r="4"/>
      <path d="M4 20c2-4 14-4 16 0"/>
    </svg>
  </div>
</div>

<script>
/* === LOGIC UNCHANGED === */
let expenses=JSON.parse(localStorage.getItem("expenses"))||[];let editId=null;

currency.value=localStorage.getItem("currency")||"â‚¹";
username.value=localStorage.getItem("username")||"";
profileName.innerText=username.value||"User";

username.oninput=()=>{localStorage.setItem("username",username.value);profileName.innerText=username.value||"User";};

function saveCurrency(){localStorage.setItem("currency",currency.value);applyFilters();}
function toggleDarkMode(){document.body.classList.toggle("dark");}

function addExpense(){if(!amount.value||!category.value||!date.value)return alert("Fill all fields");if(editId){expenses=expenses.map(e=>e.id===editId?{...e,amount:amount.value,category:category.value,date:date.value}:e);editId=null;addBtn.innerText="Add Expense";}else{expenses.push({id:Date.now(),amount:amount.value,category:category.value,date:date.value});}localStorage.setItem("expenses",JSON.stringify(expenses));amount.value=category.value=date.value="";applyFilters();}

function applyFilters(){let list=[...expenses];if(categoryFilter.value!=="All")list=list.filter(e=>e.category===categoryFilter.value);display(list);}
function display(list){total.innerText=currency.value+list.reduce((s,e)=>s+Number(e.amount),0);summaryBody.innerHTML="";list.forEach(e=>{summaryBody.innerHTML+=`<tr><td>${e.date}</td><td>${e.category}</td><td>${currency.value}${e.amount}</td><td><button class="action-btn edit-btn" onclick="editExpense(${e.id})">Edit</button><button class="action-btn delete-btn" onclick="deleteExpense(${e.id})">Del</button></td></tr>`;});}

function editExpense(id){let e=expenses.find(x=>x.id===id);amount.value=e.amount;category.value=e.category;date.value=e.date;editId=id;addBtn.innerText="Update Expense";switchScreen('add',document.querySelectorAll('.nav-item')[1]);}
function deleteExpense(id){expenses=expenses.filter(e=>e.id!==id);localStorage.setItem("expenses",JSON.stringify(expenses));applyFilters();}
function exportCSV(){let rows=["Date,Category,Amount"];expenses.forEach(e=>rows.push(`${e.date},${e.category},${e.amount}`));let blob=new Blob([rows.join("\n")],{type:"text/csv"});let a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="Expense_Report.csv";a.click();}
function switchScreen(id,el){document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));document.getElementById(id).classList.add("active");document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));el.classList.add("active");}

function renderInsight(){userOutput.innerHTML="Total spent: <b>"+expenses.reduce((s,e)=>s+Number(e.amount),0)+"</b>";}
function renderBudget(){userOutput.innerHTML="Average per entry: <b>"+(expenses.length?(expenses.reduce((s,e)=>s+Number(e.amount),0)/expenses.length).toFixed(2):0)+"</b>";}
function renderCategories(){let c={};expenses.forEach(e=>c[e.category]=(c[e.category]||0)+Number(e.amount));userOutput.innerHTML=Object.entries(c).map(x=>`${x[0]} : ${currency.value}${x[1]}`).join("<br>");}
function renderPreference(){let c={};expenses.forEach(e=>c[e.category]=(c[e.category]||0)+1);let p=Object.entries(c).sort((a,b)=>b[1]-a[1])[0];userOutput.innerHTML=p?"Most used category: <b>"+p[0]+"</b>":"No data";}

applyFilters();
</script>
</body>
</html>
